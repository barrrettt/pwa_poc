<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2196F3">
    <title>PWA POC</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/static/icon-192.png">
    <link rel="stylesheet" href="/static/css/styles.css">
    
    <!-- Eruda DevTools para mÃ³vil -->
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>
        eruda.init();
        eruda.position({ x: window.innerWidth - 50, y: window.innerHeight - 50 });
    </script>
</head>
<body>
    <div class="container">
        <div class="install-prompt" id="installPrompt">
            <p>Â¡Instala esta PWA para una mejor experiencia!</p>
            <button id="installButton">Instalar</button>
        </div>
        
        <h1>PWA POC <span class="version" id="appVersion">v...</span></h1>
        <p class="description">
            Hello I'm a PWA, install me and test things ğŸ˜Š
        </p>
        
        <!-- Device Fingerprint Display -->
        <div class="fingerprint-display" id="fingerprintDisplay">
            <span class="fingerprint-label">ğŸ”‘ Device ID:</span>
            <span class="fingerprint-value" id="fingerprintValue">Generando...</span>
        </div>
        
        <!-- Row 1: Test Button -->
        <button class="test-button" id="testButton">
            ğŸ§ª Test Endpoint
        </button>
        
        <!-- Row 2: Subscribe and Clear Subscriptions -->
        <div class="button-row">
            <button class="test-button" id="subscribeButton" style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);">
                ğŸ”” Suscribirse
            </button>
            
            <button class="test-button" id="clearSubscriptionsButton" style="background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);">
                ğŸ—‘ï¸ Borrar Subs
            </button>
        </div>
        
        <!-- Row 3: Send Notification -->
        <button class="test-button" id="sendNotificationButton" style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);">
            ğŸ“¬ Enviar NotificaciÃ³n de Prueba
        </button>
        
        <!-- Diagnostic Panel -->
        <div class="diagnostic-panel" id="diagnosticPanel">
            <div class="diagnostic-title">ğŸ” DiagnÃ³stico PWA</div>
            <div class="diagnostic-item">
                <span class="diagnostic-label">ğŸ”’ HTTPS:</span>
                <span class="diagnostic-value" id="diagSecure">-</span>
            </div>
            <div class="diagnostic-item">
                <span class="diagnostic-label">ğŸ“± Modo:</span>
                <span class="diagnostic-value" id="diagDisplay">-</span>
            </div>
            <div class="diagnostic-item">
                <span class="diagnostic-label">ğŸ”” Notificaciones:</span>
                <span class="diagnostic-value" id="diagNotification">-</span>
            </div>
            <div class="diagnostic-item">
                <span class="diagnostic-label">âš™ï¸ Service Worker:</span>
                <span class="diagnostic-value" id="diagSW">-</span>
            </div>
            <div class="diagnostic-item">
                <span class="diagnostic-label">â° Periodic Sync:</span>
                <span class="diagnostic-value" id="diagPeriodicSync">-</span>
            </div>
        </div>
        </button>
        
        <!-- Background Activity Monitor -->
        <div class="activity-monitor" id="activityMonitor">
            <div class="activity-title">ğŸ“Š Monitor de Actividad en 2Âº Plano</div>
            <div class="activity-content">
                <div class="activity-item">
                    <span class="activity-label">Ãšltima actividad:</span>
                    <span class="activity-value" id="activityTime">Cargando...</span>
                </div>
                <div class="activity-item">
                    <span class="activity-label">Estado SW:</span>
                    <span class="activity-value" id="activityStatus">â³ Verificando...</span>
                </div>
            </div>
            <button class="activity-refresh" id="activityRefresh">ğŸ”„ Actualizar</button>
        </div>
        
        <div class="history-section">
            <div class="history-header">
                <h2 class="history-title">ğŸ“ HistÃ³rico de Eventos</h2>
                <button class="clear-button" id="clearHistoryButton">ğŸ—‘ï¸ Limpiar</button>
            </div>
            <ul class="history-list" id="historyList">
                <li class="empty-message">No hay eventos todavÃ­a. Â¡Pulsa el botÃ³n!</li>
            </ul>
        </div>
    </div>
    
    <button class="scroll-to-top" id="scrollToTop">â†‘</button>
    
    <script src="/static/js/app.js"></script>
</body>
</html>
